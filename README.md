# xamla_motion_examples

This repository contains several examples being part of a Rosvita project

## example_01_pick_and_place

The first example shows a simple pick and place operation.
It should show several aspects:

* reading JointValues from the Rosvita WorldView
* executing a Supervised MoveJoints operation
* executing a sequence of MoveJoints operations
* simple use of a Gripper (e.g. close & open)

All joint values needed for the example are read from the world view in the corresponding folder.
The movement to the start joint values is supervised, the rest of the movement in this example is not.

## example_02_palletizing

This example shows how the robot can do pick and place operations for a set of poses.

Since the example does a lot of things, it is subdivided into several simple ones which can be run individually. 
Running the file `example_02/example_02_palletizing.py` puts everything together.
The features are:

* Given a pose and some parameter defining the size, calculate a grid of poses with translation and rotation corresponding to the pose (file `example_02/example_02_1_generate_grid.py` )
* Generate some collision objects at a list of poses (file `example_02/example_02_2_create_collision_boxes.py` )
* Using inverse kinematics, get corresponding joint values for a list of poses (file `example_02/example_02_3_create_joint_values_from_poses.py` )
* Do a pick and place operation from the pick joint values to every pose, using `move_joints_collision_free` for pick <-> preplace and linear movement from preplace <-> place (file `example_02/example_02_4_pick_place_poses_linear.py`, file `example_02/example_02_5_pick_place_poses.py` for a non linear version).

The file `example_02/example_02_palletizing.py`  runs the subexamples 1-4 to do the following:

* Calculating a grid of place poses using a single pose (named `GridPose`) in world view for orientation and translation
* Showing some cubes below the poses to show where they are and act as a collision object to be avoided.
* Calculate a set of pre place poses hovering over the place poses in z-direction (the grid spans in x and y direction from view of the pose)
* Generating the joint values for the pre place poses using inverse kinematics.
    The joint values at the pick position (named `Home`) is used as a seed, since we move from it to the pre place pose back and forth.
    If there could not be found joint values for every pose, an exception is thrown.
    In that case, on can alter the `GridPose` and/or the size of the grid before running the example again until a valid set of poses have been found.
* Collision free pick and place movement from the `Home` configuration addressing every pose in the grid.
 
Objects generated by the examples are written in most cases to world view for visualization.
For example, user can see the joint values calculated from the poses or observe how the grid is generated differently when its defining pose is altered in world view.

## example_03_shifting

This example shows how to shift joint values in cartesian space.

Joint values can be added and changed in `example_03_shifting/jointValues/` in world view.

The folder `example_03_shifting/poses/` in world view contains a `Reference` and a `Shift` pose.
The transformation applied in Cartesian Space is defined by the translation/rotation of the `Shift` pose in reference to the `Reference` pose. 

For every end effector the pose is transformed this way, and inverse kinematics is used to get joint values at this new pose.
If the inverse kinematics operation yields no result, the corresponding joint values are skipped.

The resulting joint values are stored in `example_03_shifting/generated/`.
